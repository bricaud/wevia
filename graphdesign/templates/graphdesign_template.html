<head>
	<title>Evia</title>
	<link rel="icon" href="../favicon.ico" />
	{% load staticfiles %}
	<link rel="stylesheet" href="{% static 'css/style.css' %}" type="text/css">
	<link rel="stylesheet" href="{% static 'font-awesome-4.7.0/css/font-awesome.min.css' %}" />
		<link rel="stylesheet" href="{% static 'css/style_links.css' %}" />
<script type="text/javascript">

var loading = "{{ loading }}"
/** Fonction basculant la visibilité d'un élément dom
* @parameter anId string l'identificateur de la cible à montrer, cacher
*/
function toggle(anId)
{
	node = document.getElementById(anId);
	var currentloading = getQueryVariable(0)
	console.log(currentloading)
	if (node.style.visibility=="hidden")
	{
		// Contenu caché, le montrer
		node.style.visibility = "visible";
		node.style.height = "auto";			// Optionnel rétablir la hauteur
	}
	else
	{
		// Contenu visible, le cacher
		node.style.visibility = "hidden";
		node.style.height = "0";			// Optionnel libérer l'espace
	}
}

function getQueryVariable(variable_place) {
    var query = window.location.search.substring(1);
    var vars = query.split('&');
    var pair = vars[variable_place].split('=');
	return decodeURIComponent(pair[0]);
}
function loading_make_graph() {
	if (loading != "graph") {
		loading = "graph";
		var currentloading = getQueryVariable(0);
		console.log(currentloading);
		if (currentloading != "make_graph") {
			toggle('loading_make_graph');
		}
	}
}
</script>

</head>
<body>
<img src="{% static 'images/eviacyberneticsalign.png' %}" width="200px"/>
<h1>Creation du graphe de mots</h1>
<div class="evia">
<p>Cliquez pour lancer la construction du graphe</p>
<!------------------------------------>
<div>
<form action="#" method="get">
	<i class="fa fa-share-alt fa-border" aria-hidden="true"></i> <input type="submit" class="btn" value="Make the graph" name="make_graph" onclick="loading_make_graph()">
	Threshold value: <input type="number" value="{{ graph_threshold }}" name="graph_threshold" size="1" min="2" max="20"/>
</form>
<p> The threshold value provides a compromise between accuracy of the classification and computation time. It can take values between 2 and 20. The larger, the faster to compute. For a good classification, a value between 2 and 8 is recommended.</p>
</div>
<div id="loading_make_graph" style="visibility: hidden;">
<i class="fa fa-cog fa-spin fa-3x fa-fw"></i>
<span class="sr-only">Loading...</span>
Loading... Please wait. <a href="outputs/" target="_blank">Show outputs</a>.
</div>

<a href="outputs/" target="_blank">Show outputs</a>
<p><b> Console: {{ console_message }}</b></p>
<h2>Navigation</h2>
<p style="text-align: center;">
	<div style="display: inline-block;vertical-align: top;width: 200px">
	 <a href="../extraction/"><i class="fa fa-arrow-circle-left fa-3x fa-border" aria-hidden="true" ></i></a>
	<p>Go to the previous step<br> Text extraction</p>
	</div>
	<div style="display: inline-block;vertical-align: top;width: 200px">
		<a href="../"><i class="fa fa-home fa-3x fa-border" aria-hidden="true"></i></a>
		<p>Main menu</p>
	</div>
	<div  style="display: inline-block;vertical-align: top;width: 200px">
	 <a href="../classif/"><i class="fa fa-arrow-circle-right fa-3x fa-border" aria-hidden="true" ></i></a>
	<p>Go to the next step<br>Analysis and classification.</p>
	</div>
</p>
</div>
</body>